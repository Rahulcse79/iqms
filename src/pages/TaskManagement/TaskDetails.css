/* TaskDetails.css â€“ Elevated, theme-based details view with hero, chips, and timeline */

/* Overlay respects topbar */
.task-details-overlay {
  position: fixed;
  top: var(--topbar-height, 94px);
  left: 0; right: 0; bottom: 0;
  background: color-mix(in oklab, var(--glass) 88%, transparent);
  display: flex; justify-content: center; align-items: center;
  padding: 16px; z-index: 1100;
  backdrop-filter: saturate(120%) blur(10px);
}

.task-details-modal {
  background: var(--surface);
  color: var(--text);
  border-radius: calc(var(--radius-lg) + 4px);
  width: 100%; max-width: 1000px;
  max-height: calc(100vh - var(--topbar-height, 94px) - 32px);
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  display: flex; flex-direction: column; overflow: hidden; min-height: 0;
  animation: pop-in var(--transition-medium) ease-out;
}

@keyframes pop-in { from { opacity: 0; transform: translateY(10px) scale(0.985);} to { opacity: 1; transform: translateY(0) scale(1);} }

/* Header with hero */
.task-details-header { position: relative; padding: 0; background: none; border-bottom: 1px solid var(--border); }
.task-hero {
  display: grid; grid-template-columns: 1fr auto; gap: 12px;
  padding: 18px 20px 14px 20px;
  background: linear-gradient(180deg, color-mix(in oklab, var(--surface-accent) 80%, transparent), var(--surface));
}
.task-hero::after {
  content: ''; display: block; height: 3px; width: 100%;
  background: linear-gradient(90deg, var(--accent), color-mix(in oklab, var(--primary) 60%, transparent));
  border-top: 1px solid color-mix(in oklab, var(--accent) 30%, transparent);
  grid-column: 1 / -1; margin-top: 8px; border-radius: 999px;
}
.task-title { display: flex; align-items: center; gap: 10px; margin: 0; font-size: 18px; font-weight: 800; letter-spacing: -0.2px; }
.task-id { padding: 2px 8px; border: 1px dashed var(--border); border-radius: 999px; color: var(--muted); font-size: 12px; }
.task-name-hero { color: var(--text); }
.mono { font-variant-numeric: tabular-nums; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

.hero-chips { display: flex; align-items: center; gap: 8px; margin-top: 8px; }
.chip {
  display: inline-flex; align-items: center; gap: 6px; height: 28px; padding: 0 10px; border-radius: 999px;
  background: color-mix(in oklab, var(--surface-accent) 80%, var(--surface));
  border: 1px solid var(--border); color: var(--text); font-weight: 600; font-size: 12px;
}
.chip.ghost { background: var(--surface); color: var(--muted); }
.chip[data-chip="priority"][data-priority="high"],
.chip[data-chip="priority"][data-priority="major"] {
  background: var(--red-bg); color: var(--red-text); border-color: var(--red-hover);
}
.chip[data-chip="priority"][data-priority="medium"] {
  background: var(--blue-bg); color: var(--blue-text); border-color: var(--blue-hover);
}
.chip[data-chip="priority"][data-priority="low"] {
  background: var(--green-bg); color: var(--green-text); border-color: var(--green-hover);
}

.status-large {
  display: inline-flex; align-items: center; justify-content: center; white-space: nowrap;
  height: 34px; padding: 0 14px; border-radius: 999px; font-weight: 800; font-size: 12px; letter-spacing: 0.3px;
  border: 1px solid var(--border); background: var(--surface); color: var(--text);
  box-shadow: 0 0 0 4px color-mix(in oklab, var(--accent) 10%, transparent);
}
.status-large[data-status="new"] { background: var(--blue-bg); color: var(--blue-text); border-color: var(--blue-hover); }
.status-large[data-status="in-progress"], .status-large[data-status="completed"] { background: var(--green-bg); color: var(--green-text); border-color: var(--green-hover); }
.status-large[data-status="on-hold"] { background: var(--blue-bg); color: var(--blue-text); border-color: var(--blue-hover); }
.status-large[data-status="cancelled"], .status-large[data-status="canceled"] { background: var(--red-bg); color: var(--red-text); border-color: var(--red-hover); }

.hero-right { display: flex; align-items: flex-start; gap: 10px; margin-right: 50px;}

.close-button {
  position: absolute; top: 10px; right: 10px;
  background: var(--surface); border: 1px solid var(--border); color: var(--text);
  width: 36px; height: 36px; border-radius: var(--radius-sm); cursor: pointer; display: inline-grid; place-items: center;
  transition: transform var(--transition-fast), background var(--transition-fast), box-shadow var(--transition-fast);
}
.close-button:hover { background: var(--surface-accent); }
.close-button:active { transform: scale(0.96); }
.close-button:focus-visible { outline: none; box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 22%, transparent); }

/* Content */
.task-details-content { padding: 16px; flex: 1 1 auto; min-height: 0; overflow: auto; background: var(--surface); }

.content-grid {
  display: grid; gap: 14px;
  grid-template-columns: 1.1fr 1.1fr 0.8fr;
}

/* Panels */
.panel {
  background: linear-gradient(180deg, color-mix(in oklab, var(--surface) 92%, transparent), var(--surface));
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 12px 12px 4px 12px;
}
.panel.full { grid-column: 1 / -1; }
.panel-header { font-weight: 800; font-size: 12px; letter-spacing: 0.4px; text-transform: uppercase; color: var(--muted); display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }
.hdr-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent); box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 18%, transparent); display: inline-block; }

/* Key-value list */
.kv { display: grid; }
.kv-row { display: grid; grid-template-columns: 1fr auto; gap: 10px; padding: 10px 6px; border-bottom: 1px dashed var(--border); }
.kv-row:last-child { border-bottom: none; }
.kv-label { color: var(--muted); font-weight: 600; font-size: 13px; }
.kv-value { color: var(--text); font-weight: 600; font-size: 14px; text-align: right; }

/* Timeline */
.timeline { position: relative; }
.tl {
  list-style: none; margin: 0; padding: 6px 0 6px 18px; position: relative;
}
.tl::before {
  content: ''; position: absolute; left: 9px; top: 0; bottom: 0; width: 2px;
  background: linear-gradient(180deg, var(--accent), color-mix(in oklab, var(--primary) 50%, transparent));
  border-radius: 2px;
}
.tl li { position: relative; padding: 10px 0 10px 8px; }
.tl .dot {
  position: absolute; left: -3px; top: 18px; width: 10px; height: 10px; border-radius: 50%;
  background: var(--surface); border: 2px solid var(--accent);
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 20%, transparent);
}
.tl-row { display: grid; grid-template-columns: 1fr auto; gap: 10px; align-items: baseline; }
.tl-label { color: var(--muted); font-weight: 700; font-size: 12px; text-transform: uppercase; letter-spacing: 0.3px; }
.tl-value { color: var(--text); font-weight: 600; font-size: 13px; }
.tl-value.warn { color: var(--red-text); }

/* Notes & chips */
.note-block { margin-top: 6px; border: 1px dashed var(--border); background: color-mix(in oklab, var(--surface-accent) 55%, transparent); border-radius: var(--radius-sm); padding: 10px; }
.note-title { font-weight: 800; font-size: 12px; color: var(--muted); text-transform: uppercase; letter-spacing: 0.4px; margin-bottom: 6px; }
.note-body { font-size: 14px; color: var(--text); line-height: 1.5; }

.chips-row { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }

/* Footer */
.task-details-footer { display: flex; justify-content: flex-end; gap: 8px; padding: 12px 16px; background: linear-gradient(180deg, var(--surface), color-mix(in oklab, var(--surface-accent) 80%, transparent)); border-top: 1px solid var(--border); }
.close-details-button { appearance: none; border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 10px 16px; background: var(--surface); color: var(--text); cursor: pointer; transition: background var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast); }
.close-details-button:hover { background: var(--surface-accent); }
.close-details-button:active { transform: translateY(1px); }
.close-details-button:focus-visible { outline: none; box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 22%, transparent); }

/* Scrollbars */
.task-details-content::-webkit-scrollbar { width: 8px; height: 8px; }
.task-details-content::-webkit-scrollbar-track { background: color-mix(in oklab, var(--surface-accent) 60%, transparent); }
.task-details-content::-webkit-scrollbar-thumb { background: color-mix(in oklab, var(--accent) 45%, transparent); border-radius: 8px; }
.task-details-content::-webkit-scrollbar-thumb:hover { background: color-mix(in oklab, var(--accent) 65%, transparent); }

/* Responsive */
@media (max-width: 980px) { .content-grid { grid-template-columns: 1fr 1fr; } }
@media (max-width: 640px) { .content-grid { grid-template-columns: 1fr; } .kv-value { text-align: left; } }

/* Reduced motion */
@media (prefers-reduced-motion: reduce) { .task-details-modal { animation: none; } }