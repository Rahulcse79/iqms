/* Consolidated.css — theme-aware, industrial level
   Improvements:
   - clearer, accessible table headers (sticky + subtle gradient)
   - highlighted TOTAL row that reads like a footer band
   - zebra striping, hover/focus states, numeric alignment
   - responsive padding adjustments
   - preserves original rules where present (only enhanced)
*/

/* ---------- Base Container ---------- */
/* make groups vertical stack (one column) */
.four-column-grid {
  display: block; /* vertical stack */
  width: 100%;
  gap: 12px;
}

/* each group card (vertical stacked) */
.group-col {
  border-radius: 8px;
  padding: 8px;
  box-shadow: 0 0 0 1px rgba(0,0,0,0.04);
  background: rgba(0,0,0,0.04);
  min-height: 44px;
  margin-bottom: 8px;
  overflow: hidden;
}

/* coloured left border */
.group-creator { border-left: 4px solid #ffb86b; }  /* orange */
.group-verifier { border-left: 4px solid #7bd389; } /* green */
.group-approver { border-left: 4px solid #6fb1ff; } /* blue */
.group-replied { border-left: 4px solid #c88cff; }  /* purple */

/* header layout: toggle + title on left, count on right */
.group-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
  gap: 8px;
}
.group-title-wrap {
  display: flex;
  gap: 8px;
  align-items: center;
}
.group-title {
  font-weight: 600;
}

/* group toggle button (chevron) */
.group-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 26px;
  height: 26px;
  border-radius: 6px;
  border: 1px solid rgba(0,0,0,0.06);
  background: transparent;
  cursor: pointer;
  padding: 0;
  font-size: 13px;
  line-height: 1;
  transition: transform 0.15s ease, background-color 0.15s ease;
}
.group-toggle:hover {
  background: rgba(0,0,0,0.03);
}
.group-toggle .chev {
  display: inline-block;
  font-size: 1.2rem;       /* increase size (default was too small) */
  font-weight: 700;        /* make the symbol bold for visibility */
  line-height: 1;
  color: #ef4444;          /* red shade (Tailwind red-500) */
  transform-origin: center;
  transition: transform 0.3s ease, color 0.2s ease;
  cursor: pointer;
  user-select: none;
}

/* Optional hover effect */
.group-toggle:hover .chev {
  color: #b91c1c;          /* darker red on hover */
  transform: scale(1.2);   /* gentle enlarge */
}

/* body collapse/expand */
.group-body {
  overflow: hidden;
  transition: max-height 240ms ease, opacity 200ms ease, padding 180ms ease;
  opacity: 1;
  padding-top: 6px;
  max-height: 2000px; /* large number to allow expansion */
}
.group-body.collapsed {
  max-height: 0;
  opacity: 0;
  padding-top: 0;
  pointer-events: none;
}

/* small table inside each group */
.group-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}
.group-table th {
  text-align: left;
  font-size: 12px;
  opacity: 0.85;
  padding-bottom: 6px;
}
.group-table td {
  padding: 6px 4px;
  vertical-align: middle;
  border-top: 1px solid rgba(0,0,0,0.04);
}

/* no-data placeholder */
.no-data.small {
  padding: 10px;
  color: #666;
  font-size: 13px;
  text-align: center;
}

/* sub-grid wrapper */
.sub-sub-grid-wrap {
  padding: 8px 0;
}

/* modal styles (small improvements) */
.cq-modal-overlay {
  position: fixed;
  left: 0; right: 0; top: 0; bottom: 0;
  background: rgba(0,0,0,0.45);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}
.cq-modal {
  width: min(980px, 95%);
  max-height: 90vh;
  overflow: auto;
  background: var(--card-bg, #fff);
  border-radius: 8px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  padding: 12px;
}
.cq-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}
.cq-modal-close {
  background: transparent;
  border: none;
  font-size: 18px;
  cursor: pointer;
}

/* small responsive behavior */
@media (max-width: 900px) {
  /* keep vertical layout on smaller screens */
}

.consolidated-page {
  padding: 1.5rem;
  background-color: var(--bg, #f9fafb);
  color: var(--text, #111827);
  font-family: var(--font-family, Inter, system-ui, sans-serif);
}
.view-btn {
  background-color: #2563eb;
  color: white;
  border: none;
  padding: 3px 8px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 13px;
}
.view-btn:hover {
  background-color: #1e40af;
}

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.55);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
}

.modal-box {
  background: white;
  padding: 20px;
  border-radius: 8px;
  width: 600px;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
}

.modal-title {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 12px;
  text-align: center;
}

.detail-table {
  width: 100%;
  border-collapse: collapse;
}
.detail-table td {
  border: 1px solid #ddd;
  padding: 6px 10px;
  font-size: 13px;
}
.detail-table td:first-child {
  background: #f9fafb;
  font-weight: 600;
  width: 35%;
}

.close-btn {
  margin-top: 12px;
  background: #ef4444;
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
}
.close-btn:hover {
  background: #dc2626;
}

/* ---------- Loading Overlay ---------- */
.loading-overlay {
  position: fixed;
  inset: 0;
  background: var(--glass, rgba(255, 255, 255, 0.85));
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
}
.loading-box {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  align-items: center;
  padding: 1.25rem 1.5rem;
  background: var(--surface, #fff);
  border-radius: 0.75rem;
  box-shadow: var(--shadow, 0 6px 24px rgba(0,0,0,0.08));
}
.spinner {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 3px solid var(--accent, #3b82f6);
  border-top-color: transparent;
  animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }
.loading-text {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--accent, #2563eb);
}

/* ---------- Controls (filters row) ---------- */
.consolidated-controls {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  align-items: flex-end;
  background: var(--surface, #fff);
  padding: 1rem 1.25rem;
  border-radius: 0.75rem;
  border: 1px solid var(--border, #e5e7eb);
  margin-bottom: 1rem;
  box-shadow: var(--shadow, 0 2px 6px rgba(0,0,0,0.04));
}
.consolidated-controls label {
  display: flex;
  flex-direction: column;
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--muted, #374151);
  gap: 0.4rem;
}

/* Inputs & Selects */
.themed-input,
.themed-select {
  padding: 0.5rem 0.75rem;
  border-radius: 0.5rem;
  border: 1px solid var(--border, #d1d5db);
  background: var(--surface-accent, #f9fafb);
  color: var(--text, #111827);
  font-size: 0.9rem;
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}
.themed-input:focus,
.themed-select:focus {
  border-color: var(--accent, #3b82f6);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent, #3b82f6) 30%, transparent);
  outline: none;
}

/* Buttons */
.primary-btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 0.5rem;
  background: var(--primary, #0ea5a4);
  color: var(--button-text, #fff);
  font-weight: 600;
  cursor: pointer;
  transition: transform 120ms ease, box-shadow 120ms ease;
}
.primary-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(0,0,0,0.08);
}
.secondary-btn {
  padding: 0.45rem 0.9rem;
  border-radius: 0.5rem;
  border: 1px solid var(--border, #d1d5db);
  background: var(--surface, #fff);
  color: var(--text, #111827);
  cursor: pointer;
}
.secondary-btn:hover {
  background: var(--surface-accent, #f3f4f6);
}

/* ---------- Error banners ---------- */
.error-banner {
  background: var(--red-bg, #fff5f5);
  color: var(--red-text, #b91c1c);
  border: 1px solid var(--red-hover, #fecaca);
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  margin: 0.75rem 0;
  font-size: 0.9rem;
}
.error-list {
  background: var(--surface, #fff);
  border: 1px solid var(--border, #e5e7eb);
  border-radius: 0.5rem;
  padding: 0.75rem 1rem;
  font-size: 0.85rem;
  color: var(--red-text, #b91c1c);
  margin-bottom: 1rem;
}

/* ---------- Summary Table ---------- */
.summary-table-wrap {
  background: var(--surface, #fff);
  border: 1px solid var(--border, #e6e6e6);
  border-radius: 0.75rem;
  padding: 1rem;
  box-shadow: var(--shadow, 0 2px 6px rgba(0,0,0,0.04));
  overflow-x: auto;
}

/* make table fluid and readable */
.summary-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
  min-width: 700px; /* keep scannable, allows horizontal scroll on smaller screens */
}

/* header + body cell baseline */
.summary-table th,
.summary-table td {
  padding: 0.65rem 0.75rem;
  border-bottom: 1px solid var(--border, #e6e6e6);
  text-align: left;
  vertical-align: middle;
}

/* sticky header: slightly elevated with subtle inner shadow */
.summary-table thead th {
  position: sticky;
  top: 0;
  z-index: 60; /* high so it sits above other pieces while scrolling */
  background: linear-gradient(180deg, var(--surface-accent, #f3f4f6), var(--surface, #fff));
  color: var(--text, #1f2937);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  font-size: 0.85rem;
  padding-top: 0.8rem;
  padding-bottom: 0.8rem;
  border-bottom: 2px solid color-mix(in srgb, var(--border, #e6e6e6) 70%, transparent 30%);
  /* subtle emboss to separate from rows */
  box-shadow: inset 0 -1px 0 color-mix(in srgb, var(--border, #e6e6e6) 45%, transparent 55%);
}

/* align numeric columns to the right - you already use .num on numeric TDs */
.summary-table td.num,
.summary-table th.num {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

/* zebra striping for readability */
.summary-table tbody tr:nth-child(even) {
  background: color-mix(in srgb, var(--surface, #ffffff) 92%, var(--surface-accent, #f9fafb) 8%);
}

/* hover & focus for rows for better scanning */
.summary-table tbody tr {
  transition: background 140ms ease, transform 140ms ease;
}
.summary-table tbody tr:hover {
  background: color-mix(in srgb, var(--accent, #6366f1) 6%, var(--surface, #fff) 94%);
  cursor: pointer;
}
.summary-table tbody tr:focus-within,
.summary-table tbody tr:focus {
  outline: 3px solid color-mix(in srgb, var(--accent, #6366f1) 14%, transparent 86%);
  outline-offset: -2px;
}

/* pending color for important numbers */
.summary-table td.pending {
  color: var(--red, #ef4444);
  font-weight: 700;
}

/* expand buttons */
.expand-btn {
  border: none;
  background: var(--surface-accent, #f1f5f9);
  border-radius: 4px;
  padding: 0.25rem 0.5rem;
  cursor: pointer;
  font-size: 1rem;
  color: var(--text);
  font-weight: bold;
  line-height: 1;
}
.expand-btn:hover {
  background: var(--accent, #6366f1);
  color: var(--surface, #fff);
}

/* TOTAL row — make it strongly visible but tasteful,
   keep first td (empty) consistent and make the TOTAL label centered */
.total-row td {
  font-weight: 700;
  color: var(--text, #fff);
  border-top: 2px solid color-mix(in srgb, var(--accent, #3b82f6) 90%, rgba(0,0,0,0.04) 10%);
  padding-top: 0.9rem;
  padding-bottom: 0.9rem;
  font-size: 0.95rem;
  letter-spacing: 0.02em;
}

/* ensure the TOTAL label reads clearly (second cell was .total-label in your markup) */
.summary-table .total-label {
  text-transform: uppercase;
  text-align: center;
  color: var(--text);
  letter-spacing: 0.06em;
}
/* Modal Stylings */

/* =============================
   THEME-BASED MODAL STYLES
   ============================= */

/* Overlay (background dim) */
.cq-modal-overlay {
  position: fixed;
  inset: 0;
  background: color-mix(in srgb, var(--bg, #000) 40%, transparent);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  animation: cqFadeIn 0.25s ease;
}

/* Modal Container */
.cq-modal {
  background: var(--surface, #fff);
  color: var(--text, #111827);
  border-radius: 12px;
  box-shadow: 0 10px 30px color-mix(in srgb, var(--shadow-color, #000) 15%, transparent);
  width: 90%;
  max-width: 640px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  animation: cqSlideUp 0.25s ease;
  border: 1px solid var(--border, #e5e7eb);
}

/* Modal Header */
.cq-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.85rem 1.25rem;
  background: var(--surface-accent, #f9fafb);
  border-bottom: 1px solid var(--border, #e5e7eb);
  color: var(--text-strong, #0f172a);
  font-weight: 600;
  font-size: 1rem;
}

/* Close Button */
.cq-modal-close {
  background: transparent;
  border: none;
  color: var(--muted, #6b7280);
  font-size: 1.25rem;
  cursor: pointer;
  transition: color 0.2s ease, transform 0.2s ease;
}
.cq-modal-close:hover {
  color: var(--accent, #3b82f6);
  transform: scale(1.1);
}

/* Modal Body */
.cq-modal-body {
  padding: 1rem 1.25rem;
  overflow-y: auto;
  background: var(--surface, #fff);
}

/* Table Styling */
.cq-modal-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
}
.cq-modal-table td {
  padding: 0.6rem 0.75rem;
  border-bottom: 1px solid var(--border, #e5e7eb);
  vertical-align: top;
  word-break: break-word;
}

/* Keys */
.cq-modal-table .k {
  font-weight: 600;
  color: var(--muted, #475569);
  width: 35%;
  border-right: 1px solid var(--border, #e5e7eb);
  text-transform: capitalize;
}

/* Values */
.cq-modal-table .v {
  color: var(--text, #111827);
  width: 65%;
}

/* Footer */
.cq-modal-footer {
  padding: 0.75rem 1.25rem;
  background: var(--surface-accent, #f9fafb);
  border-top: 1px solid var(--border, #e5e7eb);
  display: flex;
  justify-content: flex-end;
  align-items: center;
}

/* Button */
.btn {
  background: var(--primary, #0ea5a4);
  color: var(--surface, #fff);
  border: none;
  border-radius: 8px;
  padding: 0.5rem 1.25rem;
  font-weight: 600;
  font-size: 0.9rem;
  cursor: pointer;
  transition: background 0.2s ease, transform 0.1s ease;
}
.btn:hover {
  background: color-mix(in srgb, var(--primary, #0ea5a4) 85%, #000 5%);
  transform: translateY(-1px);
}

/* Animations */
@keyframes cqFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes cqSlideUp {
  from { transform: translateY(30px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

/* Responsive */
@media (max-width: 640px) {
  .cq-modal {
    width: 94%;
    max-height: 80vh;
  }
  .cq-modal-header {
    font-size: 0.95rem;
  }
  .cq-modal-table td {
    font-size: 0.85rem;
    padding: 0.5rem;
  }
  .btn {
    padding: 0.45rem 1rem;
  }
}

/* ---------- Sub tables ---------- */
.sub-table-wrap {
  margin-top: 0.5rem;
  overflow-x: auto;
}
.sub-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.85rem;
}
.sub-table th,
.sub-table td {
  padding: 0.5rem;
  border-bottom: 1px solid var(--border, #e5e7eb);
  color: var(--text);
}
.sub-table th {
  background: linear-gradient(to bottom, var(--surface-accent, #f3f4f6), var(--surface, #fff));
  font-weight: 600;
}
.sub-table tr.highlighted-row,
.cqc-item.highlighted-row {
  background: color-mix(in srgb, var(--accent, #6366f1) 10%, var(--surface, #fff));
}

/* ---------- CQC Grid ---------- */
.cqc-grid {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}
.cqc-grid-header {
  display: grid;
  grid-template-columns: repeat(9, 1fr);
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--muted, #475569);
}
.cqc-grid-body {
  display: grid;
  grid-template-columns: repeat(9, 1fr);
  gap: 0.25rem;
}
.cqc-grid-col {
  border-left: 1px solid var(--border, #e5e7eb);
  padding: 0.25rem;
}
.cqc-item {
  background: var(--surface-accent, #f8fafc);
  border-radius: 0.5rem;
  padding: 0.4rem;
  margin-bottom: 0.25rem;
  cursor: pointer;
  font-size: 0.8rem;
  transition: background 0.15s ease;
}
.cqc-item:hover {
  background: var(--accent, #6366f1);
  color: var(--surface, #fff);
}
.cqc-empty {
  color: var(--muted, #94a3b8);
  font-size: 0.8rem;
  text-align: center;
  padding: 0.5rem;
}

/* ---------- Highlighted Matches ---------- */
.highlight-box {
  margin-top: 1rem;
  border: 1px solid var(--accent, #6366f1);
  border-radius: 0.5rem;
  padding: 0.75rem;
}
.highlight-list {
  margin-top: 0.5rem;
}
.highlight-row {
  padding: 0.4rem 0;
  border-bottom: 1px solid var(--border, #e5e7eb);
  font-size: 0.85rem;
}

/* ---------- Oldest Pending ---------- */
.oldest-card {
  margin-top: 1.25rem;
  background: var(--surface, #fff);
  border: 1px solid var(--border, #e5e7eb);
  border-radius: 0.75rem;
  box-shadow: var(--shadow, 0 2px 6px rgba(0,0,0,0.04));
}
.oldest-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--border, #e5e7eb);
  font-weight: 600;
  color: var(--text, #0f172a);
}
.view-all-btn {
  padding: 0.4rem 0.75rem;
  border-radius: 0.5rem;
  border: 1px solid var(--border, #d1d5db);
  background: var(--surface-accent, #f3f4f6);
  color: var(--text, #111827);
  cursor: pointer;
}
.view-all-btn:hover {
  background: var(--accent, #6366f1);
  color: var(--surface, #fff);
}
.oldest-table-wrap {
  overflow-x: auto;
}
.oldest-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.85rem;
}
.oldest-table th,
.oldest-table td {
  padding: 0.6rem;
  border-bottom: 1px solid var(--border, #e5e7eb);
  color: var(--text);
}
.oldest-table th {
  background: linear-gradient(to bottom, var(--surface-accent, #f3f4f6), var(--surface, #fff));
  font-weight: 600;
}
.no-data {
  text-align: center;
  color: var(--muted, #6b7280);
  padding: 1rem;
}

/* ---------- Responsive tweaks ---------- */
@media (max-width: 900px) {
  .consolidated-controls {
    flex-direction: column;
    align-items: stretch;
  }
  .summary-table,
  .sub-table,
  .oldest-table {
    font-size: 0.82rem;
  }
  /* reduce padding for narrow screens */
  .summary-table th,
  .summary-table td,
  .oldest-table th,
  .oldest-table td,
  .sub-table th,
  .sub-table td {
    padding: 0.45rem 0.5rem;
  }
  .summary-table {
    min-width: 650px;
  }
}

@media (max-width: 520px) {
  .summary-table {
    font-size: 0.78rem;
    min-width: 520px;
  }
  .summary-table th,
  .summary-table td {
    padding: 0.4rem 0.45rem;
  }
}
